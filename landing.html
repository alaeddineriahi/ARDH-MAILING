<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ARD â€“ Product Landing</title>
  <!--
    Drop this file into the same folder as your /assets directory.
    Image files expected (exact names):
      - assets/BACKGROUND.png
      - assets/BOX.png
      - assets/LOGO ARD.png
      - assets/TEXT.png

    Layout overview:
      - Fullscreen background using BACKGROUND.png
      - Logo fixed to top-right
      - Headline (TEXT.png) on the left, vertically centered
      - Product box (BOX.png) bottom-right with soft shadow (pedestal effect)

    Notes:
      - Uses modern CSS (flex/grid, clamp(), svh) and scales nicely from mobile to desktop
      - No external deps; just open this file in a browser
  -->
  <style>
    :root {
      /* Safe edge padding for small screens */
      --edge-pad: clamp(10px, 4vw, 24px);
      /* Global proportion control (monotonic). Tweak 0.85â€“1.10 if needed */
      --scale: 1;
      /* Desired fixed gap between headline and pedestal */
      --hp-gap: clamp(16px, 2.2vh, 26px);
      /* Tunable spacing scales for consistent responsive offsets */
      --space-1: clamp(6px, 1.2vw, 12px);
      --space-2: clamp(10px, 1.8vw, 18px);
      --space-3: clamp(14px, 2.4vw, 28px);
      --space-4: clamp(18px, 3.2vw, 40px);
  /* Background scale (visual zoom). 1 = fit, >1 = zoom in */
  --bg-scale: 1;

      /* Max readable width of the headline image on large screens */
      /* Large but not overwhelming; now scaled by a single knob */
  --headline-max: clamp(calc(420px * var(--scale)), calc(96vw * var(--scale)), calc(880px * var(--scale)));

      /* Product box sizing range */
    --box-min: 600px;
  --box-ideal: 88vw; /* desktop target; will decrease at narrower breakpoints */
    --box-max: 1600px;
  /* Push the product further to the right (more negative = farther right) */
  --box-right: -24px;

      /* Logo top offset (smaller = higher). Tweak per breakpoint if needed */
  --logo-top: clamp(6px, 2vh, 18px);

  /* Pedestal positioning: align left edge with headline gutter */
  --pedestal-left: clamp(24px, 7vw, 120px);
  /* Pedestal vertical offset from bottom; larger = higher */
  --pedestal-bottom: clamp(140px, 22vh, 320px);
  /* Safe space from right edge so the pedestal runs under the product */
  --pedestal-right: clamp(14px, 6vw, 120px);

      /* Glassmorphism tokens */
      --glass-bg: linear-gradient(180deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.03) 100%);
      --glass-border: rgba(255,255,255,0.16);
      --glass-outline: rgba(255,255,255,0.05);
      --glass-blur: 12px;
      --glass-shadow: inset 0 1px 0 rgba(255,255,255,0.12), inset 0 -1px 0 rgba(0,0,0,0.18), 0 18px 48px rgba(0,0,0,0.35), 0 2px 6px rgba(0,0,0,0.25);
    }

    html, body {
      height: 100%;
      overflow: hidden; /* prevent any page scroll */
      overscroll-behavior: none; /* avoid scroll chaining / rubber banding */
    }

    body {
      margin: 0;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      color: #111;
      background: #000; /* graceful fallback while image loads */
    }

    /*
      The main hero region: a simple 3x3 grid to keep left/center padding
      while allowing the headline to sit in the central track.
    */
    .hero {
      /* Robust viewport sizing across browsers */
      height: 100vh;      /* fallback */
      height: 100svh;     /* modern small viewport units */
      height: 100dvh;     /* dynamic viewport height */
      display: grid;
      grid-template-columns: var(--space-3) 1fr var(--space-3);
      grid-template-rows: var(--space-3) 1fr var(--space-3);
      position: relative; /* establish containing block for absolutely positioned overlays */
      overflow: hidden; /* clip any overflow from oversized assets */

  /* Fallback background image (primary is a positioned <img> below) */
  background-image: url('assets/BACKGROUND.png');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
      /* Optional subtle overlay for contrast on bright backgrounds */
      /* background-color: rgba(0,0,0,0.08); background-blend-mode: multiply; */
    }

    /* Absolute background image that we can scale explicitly */
    .bg {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;      /* maintain aspect and fill */
      object-position: center;
      transform-origin: center center;
      transform: scale(var(--bg-scale));
      z-index: 0;             /* under everything else */
      pointer-events: none;   /* ignore mouse/touch */
      user-select: none;
      -webkit-user-drag: none;
    }

  /* Top-right brand logo overlay */
  .logo {
      position: absolute;
      top: var(--logo-top);
      right: var(--space-3);
        /* Larger base size; monotonic scaling without pixel floor */
          width: min(90vw, 1800px);
      height: auto;
      /* Give it a soft lift from the background */
      filter: drop-shadow(0 2px 10px rgba(0,0,0,0.25));
      z-index: 3;
      user-select: none;
      -webkit-user-drag: none;
      /* Allow click-through anywhere under the logo */
      pointer-events: none;
    }

    /* Headline block uses the center grid cell (left-aligned, vertically centered) */
    .headline {
      grid-column: 2;
      grid-row: 2;
      align-self: center;   /* vertical centering within middle row */
      justify-self: start;  /* left alignment within middle column */
  width: min(var(--headline-max), 99vw);
      max-width: var(--headline-max);
      z-index: 2; /* ensure it's above any background accents */
      /* Allow click-through so pedestal form remains interactive */
      pointer-events: none;
    }

    .headline img {
      display: block;
      width: 100%;
      height: auto;
      /* A whisper of shadow so text image stands out if background is busy */
      filter: drop-shadow(0 6px 18px rgba(0,0,0,0.25));
      pointer-events: none;
    }

    /* Frosted glass pedestal behind the product for 3D depth */
    .pedestal {
      position: absolute;
      /* Anchor to the left edge */
      left: var(--pedestal-left);
      right: var(--pedestal-right);
      bottom: var(--pedestal-bottom);
  /* Stretch between left and right so it always extends under the product */
  width: auto;
  /* With left/right set, allow full stretch */
  max-width: none;
  /* Let height grow with content while keeping a larger comfortable minimum */
  min-height: clamp(140px, 24vh, 300px);
      /* Ensure inner content never spills outside rounded panel */
      overflow: hidden;
      z-index: 1; /* below product (z=2) but above background */

      /* Glassmorphism: subtle background, blur, soft borders/shadows */
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      border-radius: 18px;
      backdrop-filter: blur(var(--glass-blur)) saturate(110%);
      -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(110%);

      /* Soft inner and outer shadows for depth */
      box-shadow: var(--glass-shadow);

      /* Optional faint border glow */
      outline: 1px solid var(--glass-outline);
      outline-offset: -2px;
      
      /* Layout for content inside the pedestal */
      display: grid;
      grid-template-columns: 1fr;
      grid-auto-rows: auto;
      /* Increase vertical breathing room between rows */
      column-gap: 12px;
      row-gap: clamp(12px, 1.6vh, 20px);
      align-items: center;
      justify-items: stretch;  /* stretch children to full width */
      align-content: center;   /* center the whole stack vertically */
      padding: clamp(10px, 2vh, 18px) clamp(12px, 2.2vw, 22px);
      /* Typography for pedestal UI */
      font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    }

    /* Keep all inner elements sized within the pedestal box */
    .pedestal, .pedestal * { box-sizing: border-box; }

    /* Form inside pedestal */
    .pform {
      grid-column: 1 / -1;
      display: grid;
      /* Single column; submit button sits below in .pform__actions */
      grid-template-columns: 1fr;
      gap: 12px;
      align-items: stretch;
      width: 100%;
      max-width: 100%;
      margin: 0;
      transition: all .3s ease;
    }

    .pform__actions {
      grid-column: 1 / -1;
      width: 100%;
      margin-top: clamp(8px, 1.2vh, 14px);
    }

    .pform__input, .pform__btn { max-width: 100%; }

    .pform__input {
      width: 100%;
      -webkit-appearance: none;
      appearance: none;
      background: linear-gradient(180deg, rgba(12,14,18,0.55), rgba(12,14,18,0.45));
      color: #fff;
      border: 1px solid var(--glass-border);
      border-radius: 14px;
  padding: 12px 14px;
  font-size: clamp(14px, 1.6vw, 16px);
      line-height: 1.2;
      outline: none;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.12), 0 6px 20px rgba(0,0,0,0.25);
      backdrop-filter: blur(10px) saturate(110%);
      -webkit-backdrop-filter: blur(10px) saturate(110%);
      transition: border-color .2s ease, background .2s ease, transform .12s ease;
    }

    .pform__input::placeholder {
      color: rgba(240,240,240,0.7);
      font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    }

    .pform__input:hover { border-color: rgba(255,255,255,0.26); }
    .pform__input:focus {
      background: rgba(16, 18, 22, 0.65);
      border-color: rgba(255,255,255,0.28);
      box-shadow:
        0 0 0 3px rgba(255,255,255,0.12),
        inset 0 1px 0 rgba(255,255,255,0.16),
        0 10px 28px rgba(0,0,0,0.35);
      transform: translateY(-1px);
    }

    .pform__btn {
      -webkit-appearance: none;
      appearance: none;
      display: block;
      cursor: pointer;
      border: 1px solid var(--glass-border);
      background: var(--glass-bg);
      color: #fff;
      font-weight: 700;
      letter-spacing: .02em;
      font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
      padding: 14px 18px;
      border-radius: 14px;
      font-size: clamp(14px, 1.6vw, 16px);
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.22), 0 12px 28px rgba(0,0,0,0.32), 0 2px 6px rgba(0,0,0,0.22);
      backdrop-filter: blur(12px) saturate(115%);
      -webkit-backdrop-filter: blur(12px) saturate(115%);
      transition: transform .15s ease, box-shadow .2s ease, background .2s ease;
      white-space: nowrap;
      width: 100%;
      text-align: center;
    }

    .pform__btn:hover {
      transform: translateY(-1px);
      background: linear-gradient(180deg, rgba(255,255,255,0.14), rgba(255,255,255,0.05));
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.28), 0 18px 44px rgba(0,0,0,0.42);
    }
    .pform__btn:disabled { opacity: .7; cursor: not-allowed; transform: none; }

    /* Status and success inside pedestal */
  .pstatus { grid-column: 1 / -1; min-height: 22px; width: 100%; justify-self: stretch; }
  /* After success, add a little extra room below the morphed button */
  .pform.pform--success + .pstatus { margin-top: clamp(12px, 1.8vh, 22px); }
    .pstatus__msg {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 10px 12px;
      border-radius: 12px;
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      color: #f1f5f9;
      backdrop-filter: blur(var(--glass-blur));
      -webkit-backdrop-filter: blur(var(--glass-blur));
      box-shadow: var(--glass-shadow);
      outline: 1px solid var(--glass-outline);
      outline-offset: -2px;
      font-size: 14px;
      max-width: 100%;
      white-space: normal;
      flex-wrap: wrap;
    }
  .pstatus__msg--ok { border-color: var(--glass-border); color: #f1f5f9; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; }
  .pstatus__msg--err { border-color: var(--glass-border); color: #f1f5f9; opacity: 0.95; }

    .psuccess {
      grid-column: 1 / -1;
      display: none;
      padding: 12px 14px;
      border-radius: 14px;
      border: 1px solid var(--glass-border);
      background: var(--glass-bg);
      color: #f1f5f9;
      box-shadow: var(--glass-shadow);
      outline: 1px solid var(--glass-outline);
      outline-offset: -2px;
      width: 100%;
      justify-self: stretch;
    }

    /* Morph states */
    .pform--success .pform__input {
      max-height: 0;
      opacity: 0;
      padding-top: 0;
      padding-bottom: 0;
      margin: 0;
      border-color: transparent;
      pointer-events: none;
      transition: all .35s ease;
    }

    .pform__btn.is-loading {
      position: relative;
      pointer-events: none;
    }
    .pform__btn.is-loading::after {
      content: '';
      width: 14px; height: 14px;
      margin-top: -7px;
      border-radius: 50%;
      border: 2px solid rgba(255,255,255,0.7);
      border-top-color: transparent;
      animation: spin .8s linear infinite;
    }
    .pform__btn.is-success {
      cursor: default;
      white-space: normal;
      line-height: 1.35;
      text-align: left;
      padding: 16px 18px;
    }
  .pbtn__title { display: block; font-weight: 700; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; }
  .pbtn__sub { display: block; font-weight: 400; font-size: 13px; opacity: .9; margin-top: 2px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; }

    /* Screen reader only helper */
    .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0; }

    /* Product box in the bottom-right, slightly elevated (pedestal effect) */
    .product {
      position: absolute;
      right: var(--box-right);
      bottom: 0;
      /* Monotonic scaling: cap at max without a fixed px minimum */
      width: min(var(--box-ideal), var(--box-max));
      z-index: 2;
      /* Allow click-through so pedestal form remains interactive */
      pointer-events: none;
    }

    .product img {
      display: block;
      width: 100%;
      height: auto;
      /* Soft shadow so it pops against the background */
      filter: drop-shadow(0 26px 42px rgba(0,0,0,0.35));
      user-select: none;
      -webkit-user-drag: none;
      /* Ensure clicks pass through any transparent areas so the pedestal is clickable */
      pointer-events: none;
    }

    /* Subtle "pedestal" glow beneath the box for elevation */
    .product::after {
      content: "";
      position: absolute;
      left: 12%;
      right: 12%;
      bottom: 4px; /* raised so glow isn't clipped by bottom:0 */
      height: clamp(12px, 2.8vw, 22px);
      background: radial-gradient(60% 65% at 50% 50%,
                  rgba(0,0,0,0.34) 0%,
                  rgba(0,0,0,0.22) 40%,
                  rgba(0,0,0,0.10) 70%,
                  rgba(0,0,0,0.00) 100%);
      filter: blur(6px);
      z-index: -1; /* place halo below the box image */
    }

    /*
      Responsive refinements
      - So the layout breathes well from phones to ultra-wide.
    */
    @media (max-width: 1100px) {
      :root {
  --box-right: -26px;
  --pedestal-left: clamp(20px, 6.5vw, 100px);
  --pedestal-bottom: clamp(120px, 20vh, 300px);
      /* Slightly adjust background zoom so composition reads well */
      --bg-scale: 1.02;
      }
      .pedestal {
        left: var(--pedestal-left);
        right: var(--pedestal-right);
        bottom: var(--pedestal-bottom);
        width: auto;
        max-width: none;
        height: auto;
        /* Slightly increase min-height so the 3D read holds on mid screens */
        min-height: clamp(120px, 22vh, 260px);
      }
    }

    @media (max-width: 820px) {
      :root {
        --headline-max: clamp(420px, 78vw, 980px);
        --box-ideal: 90vw; /* larger on tablets so it doesn't feel small */
        --bg-scale: 1.04;
      }
  /* Make the logo proportionally larger on tablets */
  .logo { width: min(98vw, 1600px); }
    }

    @media (max-width: 560px) {
      :root {
        --headline-max: clamp(360px, 94vw, 840px);
        --box-ideal: 92vw; /* much larger on phones for presence */
        --box-right: -6px; /* bring the box further into view */
        --logo-top: clamp(6px, 1.6vh, 10px);
        --pedestal-left: clamp(14px, 6vw, 64px);
        --pedestal-bottom: clamp(160px, 30vh, 260px);
        --hp-gap: clamp(12px, 2vh, 18px);
        --bg-scale: 1.06;
      }
      .hero {
        /* a hair more breathing room at the edges on small screens */
        grid-template-columns: var(--space-2) 1fr var(--space-2);
        grid-template-rows: var(--space-2) 1fr var(--space-2);
      }
      .logo { top: var(--space-2); right: var(--space-2); }
  /* Larger logo on small phones */
  .logo { width: min(100vw, 1280px); }
      .pedestal {
        /* Pin to safe edges so it never exceeds screen width */
        left: var(--edge-pad);
        right: var(--edge-pad);
        bottom: var(--pedestal-bottom);
        width: auto; /* let left/right define width */
        max-width: 100%;
        height: auto;
        border-radius: 14px;
        overflow: hidden;
      }
  /* Stack inputs vertically on very narrow phones */
  .pform { grid-template-columns: 1fr; }
      /* Keep same monotonic formula on mobile */
      .product { width: min(var(--box-ideal), var(--box-max)); }
    }

    /* Very short landscape devices: avoid overlaps by shrinking product and lifting pedestal */
    @media (max-height: 420px) and (orientation: landscape) {
      :root {
        --pedestal-bottom: clamp(24px, 8vh, 64px);
        --box-ideal: 34vw;
      }
    }
  </style>
</head>
<body>
  <main class="hero" role="main" aria-label="Hero section with background, logo, headline, and product">
    <!-- Scalable background image -->
    <img class="bg" src="assets/BACKGROUND.png" alt="" aria-hidden="true" />
  <!-- Brand logo (top-right) -->
    <img class="logo" src="assets/LOGO ARD.png" alt="ARD brand logo" decoding="async" />

    <!-- Headline and subtext image (left, vertically centered) -->
    <div class="headline">
      <img src="assets/TEXT.png" alt="Headline and subtext" decoding="async" />
    </div>

    <!-- Glass pedestal panel (now holds the signup form and messages) -->
    <div class="pedestal" role="region" aria-label="Sign up for updates">
      <form id="pedestal-form" class="pform" name="waitlist" method="POST" action="/success.html" data-netlify="true" netlify-honeypot="bot-field" novalidate>
        <input type="hidden" name="form-name" value="waitlist" />
        <label for="pemail" class="sr-only">Email address</label>
        <input id="pemail" class="pform__input" name="EMAIL" type="email" inputmode="email" placeholder="Enter your email" autocomplete="email" required aria-required="true" />
        <!-- Honeypots: leave empty -->
        <div style="position:absolute; left:-5000px;" aria-hidden="true" hidden>
          <input type="text" name="hp_email" tabindex="-1" autocomplete="off" />
        </div>
        <div hidden aria-hidden="true">
          <label>Donâ€™t fill this out: <input name="bot-field" /></label>
        </div>
      </form>
      <div class="pform__actions">
        <button id="psubmit" class="pform__btn" type="submit" form="pedestal-form">Notify me</button>
      </div>
      <div id="pstatus" class="pstatus" aria-live="polite" role="status"></div>
      <div id="psuccess" class="psuccess" aria-hidden="true">Youâ€™re on the list. Weâ€™ll email you the second it drops.</div>
    </div>

    <!-- Product box (bottom-right), elevated with a soft pedestal shadow -->
    <div class="product" aria-hidden="false">
      <img src="assets/BOX.png" alt="Product box" decoding="async" />
    </div>
  </main>
  <!-- EmailJS SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <script>
    (function(){
      // Maintain a fixed gap between headline and pedestal
      function positionPedestalWithGap(){
        try {
          const hero = document.querySelector('.hero');
          const head = document.querySelector('.headline');
          const ped = document.querySelector('.pedestal');
          if(!hero || !head || !ped) return;

          // reset any previous inline styles to measure natural sizes
          ped.style.top = '';
          ped.style.bottom = '';

          const gap = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--hp-gap')) || 16;
          const heroRect = hero.getBoundingClientRect();
          const headRect = head.getBoundingClientRect();
          const pedRect = ped.getBoundingClientRect();

          // Proposed top = bottom of headline + gap relative to viewport
          const proposedTop = headRect.bottom + gap - heroRect.top;
          const requiredBottom = proposedTop + pedRect.height;

          // If placing by top keeps pedestal within hero, use top; else fall back to bottom anchoring
          if(requiredBottom <= heroRect.height) {
            ped.style.top = proposedTop + 'px';
            ped.style.bottom = 'auto';
          } else {
            ped.style.top = 'auto';
            // keep existing CSS bottom var behavior
          }
        } catch(e) { /* no-op */ }
      }

      const ro = new ResizeObserver(() => positionPedestalWithGap());
      window.addEventListener('load', positionPedestalWithGap);
      window.addEventListener('resize', positionPedestalWithGap);
      try { ro.observe(document.documentElement); } catch(e) {}

      // EmailJS configuration (same as previous index)
      const EMAILJS_CONFIG = {
        publicKey: 'lhWjmAy0lz_jVmlrT',
        serviceId: 'service_vmp9mlr',
        templateId: 'template_ufil9is'
      };

      try {
        if (typeof emailjs !== 'undefined' && EMAILJS_CONFIG.publicKey) {
          emailjs.init(EMAILJS_CONFIG.publicKey);
        }
      } catch(e) { console.warn('EmailJS init error', e); }

      async function sendConfirmationEmail(userEmail) {
        if (typeof emailjs === 'undefined' || !EMAILJS_CONFIG.publicKey) return false;
        try {
          const params = {
            to_email: userEmail,
            from_name: 'ARDH',
            reply_to: 'no-reply@ardh.com',
            user_email: userEmail,
            brand_name: 'ARDH',
            message: `Thanks for joining the ARDH drop list! ðŸ”¥\n\nWe'll notify you the moment our next streetwear drop goes live. \n\nStay ready â€“ these oversized tees sell out fast.\n\nâ€” The ARDH Team`
          };
          const res = await emailjs.send(EMAILJS_CONFIG.serviceId, EMAILJS_CONFIG.templateId, params);
          console.log('EmailJS sent:', res);
          return true;
        } catch (err) {
          console.error('EmailJS failed:', err);
          return false;
        }
      }

      const form = document.getElementById('pedestal-form');
      const email = document.getElementById('pemail');
      const submit = document.getElementById('psubmit');
      const status = document.getElementById('pstatus');
      const success = document.getElementById('psuccess');

      function setStatus(type, msg){
        if(!status) return;
        const cls = type === 'ok' ? 'pstatus__msg pstatus__msg--ok' : 'pstatus__msg pstatus__msg--err';
        status.innerHTML = '<span class="'+cls+'">'+ (type==='ok' ? 'âœ” ' : 'âœ• ') + msg + '</span>';
      }

      function isValidEmail(v){
        const t = String(v||'').trim();
        return /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/i.test(t);
      }

      form?.addEventListener('submit', async function(ev){
        ev.preventDefault();
        const val = email.value.trim();
        if(!isValidEmail(val)){
          setStatus('err', 'Enter a valid email to join the list.');
          email.focus();
          return;
        }

        // Spam honeypot
        const hp = form.querySelector('[name="hp_email"]');
        if (hp && hp.value) {
          setStatus('err', 'Bot detected.');
          return;
        }

        submit.disabled = true;
        submit.classList.add('is-loading');
        setStatus('ok', 'Adding you to the listâ€¦');

        // Try to send confirmation email
        const emailSent = await sendConfirmationEmail(val);
        if (emailSent) {
          setStatus('ok', 'Email sent! Finishing upâ€¦');
        }

        // Submit to Netlify Forms endpoint (same site used previously)
        try {
          const formData = new FormData(form);
          // URL-encode the data
          const encoded = new URLSearchParams(formData).toString();
          const netlifyRes = await fetch('https://ardh-list.netlify.app/', {
            method: 'POST',
            headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
            body: encoded
          });

          if (!netlifyRes.ok) throw new Error('Netlify submission failed');

          // Morph on success
          form.classList.add('pform--success');
          submit.classList.remove('is-loading');
          submit.classList.add('is-success');
          submit.innerHTML = '<span class="pbtn__title">Youâ€™re on the list âœ³</span><span class="pbtn__sub">Weâ€™ll email you the second it drops.</span>';
          setStatus('ok', 'All set! Check your inbox soon.');
          try { form.reset(); } catch(e) {}
        } catch (err) {
          console.error(err);
          // Still morph if email was sent, otherwise show error
          if (emailSent) {
            form.classList.add('pform--success');
            submit.classList.remove('is-loading');
            submit.classList.add('is-success');
            submit.innerHTML = '<span class="pbtn__title">Youâ€™re on the list âœ³</span><span class="pbtn__sub">Weâ€™ll email you the second it drops.</span>';
            setStatus('ok', 'Email sent. Youâ€™re on the list.');
          } else {
            setStatus('err', 'Something went wrong. Please try again.');
          }
        } finally {
          submit.disabled = false;
        }
      });
    })();
  </script>
</body>
</html>
