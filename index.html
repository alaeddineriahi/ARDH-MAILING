<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ARDH â€” Drop Notify</title>
    <meta name="description" content="Sign up to get notified when ARDH drops the next run of oversized streetwear tees." />
    <meta property="og:title" content="ARDH â€” Next Drop" />
    <meta property="og:description" content="Be first in line. Join the list for the ARDH drop." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="/assets/logo.png" />
    <meta name="theme-color" content="#0B0B0B" />

    <!-- Optional Google Fonts (allowed). Falls back to system if offline. -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&family=Inter:wght@400;600&display=swap" rel="stylesheet" />
    
    <!-- EmailJS SDK for automated confirmation emails -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>

    <style>
      :root {
        /* Suggested ARDH palette */
        --bg: #0b0b0b;          /* near-black */
        --panel: #111214;       /* surface */
        --text: #f5f5f5;        /* white-ish */
        --muted: #9aa0a6;       /* muted grey */
        --accent: #dc2626;      /* sceptre red */
        --accent-2: #ef4444;    /* lighter red */
        --danger: #ff5c7a;      /* for errors */
        --ok: #fecaca;          /* success tint (red-based) */
        --focus: #ffffff;       /* focus ring */

        /* Sizing */
        --radius: 12px;
        --radius-sm: 10px;
        --shadow: 0 10px 30px rgba(0,0,0,.45);
      }

      /* Basic reset */
      *, *::before, *::after { box-sizing: border-box; }
      html, body { height: 100%; }
      body {
        margin: 0;
        font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--text);
        background: 
          radial-gradient(1200px 1200px at 80% -10%, rgba(220,38,38,0.15), transparent 50%),
          radial-gradient(900px 900px at -10% 10%, rgba(239,68,68,0.12), transparent 50%),
          var(--bg);
        position: relative;
        line-height: 1.45;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      
      /* Hero background image */
      body::before {
        content: '';
        position: fixed;
        top: 0;
        right: 0;
        width: 70%;
        height: 100vh;
        background: url('/assets/hero-bg.jpg') center/cover no-repeat;
        opacity: 0.18;
        z-index: -2;
        filter: grayscale(30%) sepia(15%) hue-rotate(340deg) saturate(1.1);
        mask: linear-gradient(to left, 
          rgba(0,0,0,1) 20%, 
          rgba(0,0,0,0.8) 50%, 
          rgba(0,0,0,0.3) 80%, 
          rgba(0,0,0,0) 100%);
        -webkit-mask: linear-gradient(to left, 
          rgba(0,0,0,1) 20%, 
          rgba(0,0,0,0.8) 50%, 
          rgba(0,0,0,0.3) 80%, 
          rgba(0,0,0,0) 100%);
      }
      
      /* Dark overlay for better text readability */
      body::after {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: linear-gradient(135deg, 
          rgba(11,11,11,0.85) 0%, 
          rgba(11,11,11,0.75) 50%, 
          rgba(11,11,11,0.9) 100%);
        z-index: -1;
      }

      a { color: var(--accent); text-decoration: none; }
      a:hover { text-decoration: underline; }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 32px 24px;
        position: relative;
        z-index: 1;
      }

      /* Header / Brand */
      .header { 
        display: flex; 
        align-items: center; 
        justify-content: space-between; 
        gap: 24px;
        padding: 0;
        margin-bottom: 40px;
      }
      .brand { display: inline-flex; align-items: center; text-decoration: none; }
      .brand__logo {
        width: 360px; height: 360px; display: block;
      }
      .brand__logo img { 
        width: 100%; height: 100%; 
        object-fit: contain; 
        display: block; 
        filter: drop-shadow(0 8px 24px rgba(220,38,38,0.3)) drop-shadow(0 0 32px rgba(220,38,38,0.15));
      }

      /* Hero */
      .hero { 
        padding: 64px 0 48px;
        position: relative;
      }
      .hero__eyebrow {
        font-size: 14px; 
        text-transform: uppercase; 
        letter-spacing: .2em; 
        color: var(--accent);
        font-weight: 600;
        background: linear-gradient(90deg, var(--accent), var(--accent-2));
        background-clip: text;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }
      .hero__title {
        margin: 16px 0 20px; 
        font-family: "Space Grotesk", Inter, system-ui; 
        font-weight: 700;
        font-size: clamp(42px, 10vw, 96px); 
        line-height: 0.95;
        text-wrap: balance;
        letter-spacing: -0.02em;
      }
      .hero__title .accent { 
        color: var(--accent); 
        text-shadow: 0 0 32px rgba(220,38,38,.4), 0 0 64px rgba(220,38,38,.2);
      }
      .hero__subtitle { 
        color: #e5e7eb; 
        font-size: clamp(18px, 3vw, 24px); 
        max-width: 52ch;
        font-weight: 400;
        line-height: 1.6;
      }

      /* Enhanced Form Card */
      .form-card {
        margin-top: 40px; 
        background: linear-gradient(135deg, rgba(255,255,255,0.12), rgba(255,255,255,0.03));
        border: 1px solid rgba(220,38,38,0.3);
        border-radius: 24px; 
        padding: 32px; 
        box-shadow: 
          0 25px 60px rgba(0,0,0,.7),
          0 0 0 1px rgba(255,255,255,0.08),
          inset 0 1px 0 rgba(255,255,255,0.15),
          0 0 80px rgba(220,38,38,0.1);
        position: relative; 
        overflow: clip;
        backdrop-filter: blur(24px) saturate(1.2);
        transition: all 0.3s ease;
      }
      
      .form-card:hover {
        transform: translateY(-2px);
        box-shadow: 
          0 30px 70px rgba(0,0,0,.8),
          0 0 0 1px rgba(255,255,255,0.1),
          inset 0 1px 0 rgba(255,255,255,0.2),
          0 0 120px rgba(220,38,38,0.15);
      }
      
      .form-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(90deg, transparent, rgba(220,38,38,0.5), transparent);
      }
      .form {
        display: grid; grid-template-columns: 1fr auto; gap: 16px; align-items: center;
      }
      .form__input {
        width: 100%; 
        background: rgba(15,17,21,0.85); 
        border: 1px solid rgba(42,45,53,0.6); 
        color: var(--text);
        border-radius: 18px; 
        padding: 18px 20px; 
        font-size: 17px;
        backdrop-filter: blur(12px);
        transition: all .4s cubic-bezier(0.4, 0, 0.2, 1);
        font-weight: 400;
      }
      
      .form__input::placeholder { 
        color: #9CA3AF; 
        font-weight: 400;
        transition: opacity 0.3s ease;
      }
      
      .form__input:hover {
        border-color: rgba(220,38,38,0.4);
        background: rgba(15,17,21,0.9);
      }
      
      .form__input:focus {
        outline: none; 
        border-color: var(--accent);
        background: rgba(15,17,21,0.98);
        box-shadow: 
          0 0 0 4px rgba(220,38,38,0.15), 
          0 12px 40px rgba(220,38,38,.12),
          0 20px 50px rgba(0,0,0,.6);
        transform: translateY(-3px) scale(1.01);
      }
      
      .form__input:focus::placeholder {
        opacity: 0.7;
      }
      .form__btn {
        -webkit-appearance: none; appearance: none; cursor: pointer; border: none;
        background: linear-gradient(135deg, var(--accent) 0%, #b91c1c 50%, var(--accent-2) 100%);
        color: #ffffff; font-weight: 700; letter-spacing: .02em; font-family: "Space Grotesk", Inter, system-ui;
        padding: 18px 28px; border-radius: 18px; font-size: 17px;
        transition: all .3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 
          0 12px 32px rgba(220,38,38,.35), 
          0 4px 16px rgba(0,0,0,.25),
          inset 0 1px 0 rgba(255,255,255,.25),
          0 0 0 0px rgba(220,38,38,0.4);
        position: relative;
        overflow: hidden;
        text-shadow: 0 1px 2px rgba(0,0,0,0.3);
      }
      
      .form__btn::before {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(135deg, rgba(255,255,255,0.15), rgba(255,255,255,0.05));
        opacity: 0;
        transition: all .3s ease;
        border-radius: 18px;
      }
      
      .form__btn::after {
        content: '';
        position: absolute;
        inset: 0;
        background: radial-gradient(circle at center, rgba(255,255,255,0.3) 0%, transparent 70%);
        opacity: 0;
        transform: scale(0);
        transition: all .4s ease;
        border-radius: 18px;
      }
      
      .form__btn:hover { 
        transform: translateY(-3px) scale(1.02);
        box-shadow: 
          0 20px 50px rgba(220,38,38,.45), 
          0 12px 30px rgba(0,0,0,.4),
          inset 0 1px 0 rgba(255,255,255,.4),
          0 0 0 4px rgba(220,38,38,0.15);
        background: linear-gradient(135deg, #ef4444 0%, #dc2626 50%, #b91c1c 100%);
      }
      
      .form__btn:hover::before { 
        opacity: 1; 
      }
      
      .form__btn:active { 
        transform: translateY(-1px) scale(0.98);
      }
      
      .form__btn:active::after {
        opacity: 1;
        transform: scale(1);
        transition: all .15s ease;
      }
      
      .form__btn:focus-visible { 
        outline: 3px solid rgba(255,255,255,0.6); 
        outline-offset: 3px; 
      }
      
      .form__btn:disabled {
        opacity: 0.7;
        cursor: not-allowed;
        transform: none;
        box-shadow: 
          0 8px 20px rgba(220,38,38,.2), 
          0 2px 8px rgba(0,0,0,.15),
          inset 0 1px 0 rgba(255,255,255,.15);
      }

      .helper-row { display: flex; align-items: center; gap: 12px; flex-wrap: wrap; margin-top: 10px; }
      .note { color: var(--muted); font-size: 13px; }
      .note--accent { color: #cfeee2; }
      .note--danger { color: var(--danger); }
      .kicker { 
        color: var(--accent); 
        font-size: 14px; 
        letter-spacing: .05em; 
        font-weight: 600;
        text-transform: uppercase;
        background: rgba(220,38,38,0.1);
        padding: 8px 16px;
        border-radius: 50px;
        border: 1px solid rgba(220,38,38,0.3);
      }

      /* Enhanced Status Messages */
      .status { 
        margin-top: 16px; 
        min-height: 24px; 
        font-size: 14px;
        transition: all 0.3s ease;
      }
      
      .status__msg { 
        display: inline-flex; 
        gap: 10px; 
        align-items: center; 
        padding: 12px 16px; 
        border-radius: 14px; 
        background: rgba(15,17,21,0.8);
        border: 1px solid rgba(34,37,43,0.6);
        backdrop-filter: blur(12px);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        font-weight: 500;
        animation: slideUp 0.3s ease;
      }
      
      .status__msg--ok { 
        border-color: rgba(220,38,38,.4); 
        background: linear-gradient(135deg, rgba(220,38,38,.12), rgba(220,38,38,.06)); 
        color: #fecaca;
        box-shadow: 0 8px 25px rgba(220,38,38,0.15);
      }
      
      .status__msg--err { 
        border-color: rgba(255,92,122,.5); 
        background: linear-gradient(135deg, rgba(255,92,122,.12), rgba(255,92,122,.06)); 
        color: #ffd0d9;
        box-shadow: 0 8px 25px rgba(255,92,122,0.15);
      }
      
      /* Loading Animation */
      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      
      @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
      }
      
      .status__msg--loading {
        animation: pulse 1.5s infinite;
      }

      /* Enhanced Success Panel */
      .success { 
        display: none; 
        margin-top: 20px; 
        padding: 24px; 
        border: 1px solid rgba(220,38,38,0.3); 
        border-radius: 20px; 
        background: linear-gradient(135deg, rgba(220,38,38,.15), rgba(220,38,38,.05));
        backdrop-filter: blur(16px);
        box-shadow: 
          0 12px 30px rgba(220,38,38,0.15),
          inset 0 1px 0 rgba(255,255,255,0.1);
        animation: successSlideIn 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
      }
      
      .success::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(90deg, transparent, rgba(220,38,38,0.6), transparent);
      }
      
      .success__title { 
        font-family: "Space Grotesk", Inter, system-ui; 
        font-size: 24px; 
        font-weight: 700;
        margin: 0 0 8px; 
        color: #ffffff;
        text-shadow: 0 2px 4px rgba(0,0,0,0.3);
      }
      
      .success__text { 
        color: #fecaca; 
        margin: 0;
        font-size: 16px;
        line-height: 1.5;
        font-weight: 400;
      }
      
      @keyframes successSlideIn {
        from {
          opacity: 0;
          transform: translateY(20px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }



      /* Enhanced Mobile-First Responsive Design */
      
      /* Large screens (1200px+) - Premium desktop experience */
      @media (min-width: 1200px) {
        .container { max-width: 1400px; padding: 60px 40px; }
        .hero { padding: 80px 0 60px; }
        .hero__title { font-size: clamp(64px, 8vw, 120px); }
        .brand__logo { width: 400px; height: 400px; }
      }
      
      /* Desktop screens (720px+) */
      @media (min-width: 720px) {
        .form-card { padding: 40px; }
        .form { grid-template-columns: 1fr auto; gap: 20px; }
        .form__btn { padding: 20px 36px; font-size: 18px; min-width: 160px; }
        .container { padding: 40px 32px; }
        .hero { padding: 70px 0 50px; }
        .hero__subtitle { font-size: clamp(20px, 3vw, 26px); }
      }
      
      /* Tablet screens (480px to 719px) */
      @media (max-width: 719px) and (min-width: 480px) {
        .container { padding: 32px 24px; }
        .form-card { padding: 32px 24px; }
        .form { grid-template-columns: 1fr auto; gap: 16px; }
        .form__btn { padding: 18px 24px; font-size: 17px; }
        .brand__logo { width: 280px; height: 280px; }
        .header { margin-bottom: 32px; }
        .hero { padding: 48px 0 40px; }
        .hero__title { font-size: clamp(36px, 8vw, 64px); }
      }
      
      /* Mobile screens (479px and below) - Optimized mobile experience */
      @media (max-width: 479px) {
        .container { 
          padding: 20px 16px; 
          max-width: 100%;
        }
        
        /* Mobile header improvements */
        .header { 
          margin-bottom: 20px;
          flex-direction: column;
          gap: 16px;
          text-align: center;
        }
        
        /* Mobile logo optimization */
        .brand__logo { 
          width: 200px; 
          height: 200px;
          margin: 0 auto;
        }
        
        /* Mobile kicker positioning */
        .kicker {
          font-size: 12px;
          padding: 6px 14px;
        }
        
        /* Mobile hero section */
        .hero { 
          padding: 32px 0 24px;
          text-align: center;
        }
        
        .hero__eyebrow {
          font-size: 12px;
          letter-spacing: 0.15em;
        }
        
        .hero__title { 
          font-size: clamp(28px, 8vw, 48px);
          line-height: 1.0;
          margin: 12px 0 16px;
        }
        
        .hero__subtitle { 
          font-size: clamp(16px, 4vw, 20px);
          line-height: 1.5;
          max-width: 90%;
          margin: 0 auto;
        }
        
        /* Mobile form improvements */
        .form-card { 
          margin-top: 32px;
          padding: 24px 16px;
          border-radius: 16px;
        }
        
        .form { 
          grid-template-columns: 1fr; 
          gap: 16px;
        }
        
        .form__input {
          padding: 20px 16px;
          font-size: 16px; /* Prevents zoom on iOS */
          border-radius: 14px;
        }
        
        .form__btn { 
          width: 100%;
          padding: 20px 28px;
          font-size: 17px;
          border-radius: 14px;
          font-weight: 700;
        }
        
        /* Mobile helper text */
        .helper-row { 
          flex-direction: column;
          gap: 8px;
          text-align: center;
        }
        
        .note {
          font-size: 12px;
          line-height: 1.4;
        }
        
        /* Mobile status messages */
        .status__msg {
          padding: 12px 16px;
          font-size: 14px;
          text-align: center;
        }
        
        /* Mobile success panel */
        .success {
          padding: 20px 16px;
          border-radius: 14px;
          text-align: center;
        }
        
        .success__title {
          font-size: 20px;
        }
        
        .success__text {
          font-size: 15px;
          line-height: 1.5;
        }
        
        /* Mobile background adjustments */
        body::before { 
          width: 100%; 
          opacity: 0.08;
          mask: linear-gradient(to bottom, 
            rgba(0,0,0,0.6) 20%, 
            rgba(0,0,0,0.3) 60%, 
            rgba(0,0,0,0.1) 100%);
          -webkit-mask: linear-gradient(to bottom, 
            rgba(0,0,0,0.6) 20%, 
            rgba(0,0,0,0.3) 60%, 
            rgba(0,0,0,0.1) 100%);
        }
      }
      
      /* Extra small screens (320px and below) */
      @media (max-width: 320px) {
        .container { padding: 16px 12px; }
        .brand__logo { width: 160px; height: 160px; }
        .hero__title { font-size: clamp(24px, 7vw, 36px); }
        .form-card { padding: 20px 12px; }
      }

      /* Decorative noise overlay */
      .grain {
        pointer-events: none; position: fixed; inset: 0; opacity: .08; mix-blend-mode: soft-light; background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="160" height="160" viewBox="0 0 160 160"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="2" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity="0.4"/></svg>');
      }
    </style>
  </head>

  <!--
    ARDH Landing â€” Setup quicknotes
    - Replace the logo file at /assets/logo.png (same path used below)
    - Netlify Forms is enabled by default (free on Netlify): keep name="waitlist", data-netlify="true" and hidden form-name.
    - Google Forms (fallback): paste your iframe embed URL in data-src; it lazy-loads only when opened.

    Copy variants (pick one â€” update .hero__title, .hero__subtitle, and button text):
      VARIANT A
        Headline: Oversized, Unbothered. ARDH.
        Sub: Street-grade tees for the next drop. Join the early access list.
        Button: Notify me
      VARIANT B
        Headline: Built Big. Worn Hard.
        Sub: ARDH is back soon â€” get first dibs on the drop.
        Button: Get on the list
      VARIANT C
        Headline: Urban Uniform, Remixed.
        Sub: Heavy tees. Clean shapes. Early list only.
        Button: Text me when it hits (use email!)
  -->

  <body>
    <div class="grain" aria-hidden="true"></div>
    <header class="container header" role="banner">
      <a class="brand" href="#" aria-label="ARDH home">
        <span class="brand__logo">
          <!-- Replace /assets/logo.png with your logo image (keep the same path) -->
          <img src="/assets/logo.png" alt="ARDH logo" />
        </span>
      </a>
      <span class="kicker">Drop incoming</span>
    </header>

    <main class="container" id="main" role="main">
      <section class="hero">
        <span class="hero__eyebrow">Early Access</span>
        <h1 class="hero__title">Oversized, <span class="accent">Unbothered</span>. ARDH.</h1>
        <p class="hero__subtitle">Street-grade tees for the next drop. Get on the early list and weâ€™ll hit your inbox the moment it goes live.</p>

        <div class="form-card" aria-labelledby="signup-title">
          <h2 id="signup-title" class="sr-only" style="position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden;">Join the ARDH drop list</h2>

          <!-- Netlify Forms (free) -->
          <form
            id="notify-form"
            class="form"
            name="waitlist"
            method="POST"
            action="/success.html"
            data-netlify="true"
            netlify-honeypot="bot-field"
            novalidate
          >
            <!-- Netlify fields -->
            <input type="hidden" name="form-name" value="waitlist" />
            <label class="sr-only" for="email" id="email-label" style="position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden;">Email address</label>
            <input
              id="email"
              class="form__input"
              name="EMAIL"
              type="email"
              inputmode="email"
              placeholder="your@email.com"
              required
              aria-required="true"
              aria-labelledby="email-label"
              aria-describedby="privacy-line"
              autocomplete="email"
            />
            <button class="form__btn" id="submit-btn" type="submit" aria-label="Notify me about the ARDH drop">Notify me</button>

            <!-- Honeypot for bots (leave empty) -->
            <div style="position: absolute; left: -5000px;" aria-hidden="true" hidden>
              <input type="text" name="hp_email" tabindex="-1" autocomplete="off" />
            </div>
            <!-- Netlify honeypot field -->
            <div hidden aria-hidden="true">
              <label>Donâ€™t fill this out: <input name="bot-field" /></label>
            </div>
          </form>

          <div class="helper-row" aria-live="polite">
            <p id="privacy-line" class="note">We only use your email to notify about the drop â€” unsubscribe anytime.</p>
            <p class="note note--accent">No spam. You can unsubscribe anytime. ðŸ–¤</p>
          </div>

          <div id="form-status" class="status" aria-live="polite" role="status"></div>

          <div id="success-panel" class="success" aria-hidden="true">
            <p class="success__title">Youâ€™re on the list âœ³</p>
            <p class="success__text">Watch your inbox. Weâ€™ll email you the second ARDH drops.</p>
          </div>

          <noscript>
            <div class="status__msg">
              JavaScript is off â€” the form will submit normally to Netlify and show a default success page. Thanks!
            </div>
          </noscript>
        </div>
      </section>


    </main>

    <script>
      /* Accessibility helper: prefer-reduced-motion */
      try {
        const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        if (prefersReduced) {
          document.documentElement.style.setProperty('--shadow', 'none');
        }
      } catch (e) {}

      // Utilities
      const $ = (sel, root=document) => root.querySelector(sel);
      const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));

      // EmailJS Configuration
      // TODO: Replace with your actual EmailJS credentials after setting up your account
      const EMAILJS_CONFIG = {
        publicKey: 'lhWjmAy0lz_jVmlrT',    // Temporarily disabled until new Netlify site
        serviceId: 'service_vmp9mlr',      // Your service ID  
        templateId: 'template_ufil9is'     // Will update after new deployment
      };

      // Initialize EmailJS
      (function() {
        if (typeof emailjs !== 'undefined' && EMAILJS_CONFIG.publicKey !== 'YOUR_EMAILJS_PUBLIC_KEY') {
          emailjs.init(EMAILJS_CONFIG.publicKey);
        }
      })();

      // Send confirmation email via EmailJS
      async function sendConfirmationEmail(userEmail) {
        if (typeof emailjs === 'undefined' || EMAILJS_CONFIG.publicKey === 'YOUR_EMAILJS_PUBLIC_KEY') {
          console.log('EmailJS not configured - skipping confirmation email');
          return false;
        }

        try {
          const templateParams = {
            to_email: userEmail,
            from_name: 'ARDH',
            reply_to: 'no-reply@ardh.com', // Replace with your email
            user_email: userEmail,
            brand_name: 'ARDH',
            message: `Thanks for joining the ARDH drop list! ðŸ”¥

We'll notify you the moment our next streetwear drop goes live. 

Stay ready â€“ these oversized tees sell out fast.

â€” The ARDH Team`
          };

          const response = await emailjs.send(
            EMAILJS_CONFIG.serviceId,
            EMAILJS_CONFIG.templateId,
            templateParams
          );

          console.log('Confirmation email sent successfully:', response);
          return true;
        } catch (error) {
          console.error('Failed to send confirmation email:', error);
          return false;
        }
      }

      const form = $('#notify-form');
      const emailInput = $('#email');
      const submitBtn = $('#submit-btn');
      const statusEl = $('#form-status');
      const successPanel = $('#success-panel');

      // Render status message
      function setStatus(type, msg) {
        if (!statusEl) return;
        const cls = type === 'ok' ? 'status__msg status__msg--ok' : 'status__msg status__msg--err';
        statusEl.innerHTML = `<span class="${cls}">` + (type === 'ok' ? 'âœ” ' : 'âœ• ') + msg + '</span>';
      }

      function validateEmail(value) {
        // Lightweight RFC5322-ish email test, good enough for client-side
        const trimmed = String(value || '').trim();
        if (!trimmed) return false;
        
        const re = /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/i;
        const isValid = re.test(trimmed);
        
        console.log('Email validation:', { value: trimmed, isValid });
        return isValid;
      }

      // Handle Netlify AJAX with robust fallback to native POST
      async function onSubmit(ev) {
        const email = emailInput.value.trim();

        // Client-side validation
        if (!validateEmail(email)) {
          ev.preventDefault();
          setStatus('err', 'Enter a valid email to join the list.');
          emailInput.focus();
          return;
        }

        // Honeypot check
        const hp = form.querySelector('[name="hp_email"]');
        if (hp && hp.value) {
          ev.preventDefault();
          setStatus('err', 'Bot detection triggered.');
          return;
        }

        // Check if we're running locally for demo mode or if Netlify is unavailable
        const isLocal = location.hostname.includes('localhost') || location.hostname.includes('127.0.0.1') || location.protocol === 'file:' || location.hostname.includes('netlify');
        
        if (isLocal) {
          // For local development, show success without actually submitting
          ev.preventDefault();
          setStatus('ok', 'Demo mode - form submission simulated!');
          
          setTimeout(async () => {
            // Try to send confirmation email even in demo mode
            setStatus('ok', 'Sending confirmation email...');
            const emailSent = await sendConfirmationEmail(email);
            
            if (emailSent) {
              setStatus('ok', 'All set! Check your email for confirmation.');
            } else {
              setStatus('ok', 'All set! You\'re on the list.');
            }
            
            successPanel.style.display = 'block';
            successPanel.setAttribute('aria-hidden', 'false');
            form.setAttribute('aria-hidden', 'true');
            form.style.display = 'none';
            try { form.reset(); } catch (e) {}
          }, 1000);
        } else {
          // For production (Netlify) - send confirmation email then submit form
          ev.preventDefault(); // We'll handle submission manually after email
          setStatus('ok', 'Submittingâ€¦');
          submitBtn.disabled = true;
          
          // Send confirmation email first
          setStatus('ok', 'Sending confirmation email...');
          const emailSent = await sendConfirmationEmail(email);
          
          // Then submit to Netlify for your email collection
          setStatus('ok', 'Adding to waitlist...');
          
          // Create form data for Netlify submission
          const formData = new FormData(form);
          
          try {
            const netlifyResponse = await fetch('https://ardh-list.netlify.app/', {
              method: 'POST',
              headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
              body: new URLSearchParams(formData).toString()
            });
            
            if (netlifyResponse.ok) {
              if (emailSent) {
                setStatus('ok', 'Perfect! Check your email for confirmation.');
              } else {
                setStatus('ok', 'All set! You\'re on the list.');
              }
              
              setTimeout(() => {
                successPanel.style.display = 'block';
                successPanel.setAttribute('aria-hidden', 'false');
                form.setAttribute('aria-hidden', 'true');
                form.style.display = 'none';
                try { form.reset(); } catch (e) {}
              }, 1500);
            } else {
              throw new Error('Netlify submission failed');
            }
          } catch (netlifyError) {
            console.error('Netlify submission error:', netlifyError);
            if (emailSent) {
              setStatus('ok', 'Email sent! You\'re on the list.');
            } else {
              setStatus('err', 'Something went wrong. Please try again.');
            }
            
            // Still show success if email was sent
            if (emailSent) {
              setTimeout(() => {
                successPanel.style.display = 'block';
                successPanel.setAttribute('aria-hidden', 'false');
                form.setAttribute('aria-hidden', 'true');
                form.style.display = 'none';
                try { form.reset(); } catch (e) {}
              }, 1500);
            }
          } finally {
            submitBtn.disabled = false;
          }
        }
      }
      form?.addEventListener('submit', onSubmit);

      // Accessibility: submit with Enter key from input
      emailInput?.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          e.preventDefault();
          submitBtn?.click();
        }
      });


    </script>
  </body>
</html>
